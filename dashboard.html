<!doctype html>
<html lang="ko" class="theme-light">
<head>
<meta charset="utf-8" />

<!-- 로그인 필터 -->
<script>
(function(){
  try{
    const raw = localStorage.getItem("korual_user");
    const user = raw && JSON.parse(raw);
    if(!user?.username) location.replace("index.html");
  }catch(e){
    location.replace("index.html");
  }
})();
</script>

<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>KORUAL CONTROL CENTER</title>

<link rel="stylesheet" href="style.css" />

<!-- Pretendard -->
<link rel="preconnect" href="https://fonts.gstatic.com" />
<link href="https://cdn.jsdelivr.net/npm/pretendard/dist/web/static/pretendard.css" rel="stylesheet"/>

</head>

<body>
<div class="app-root">

  <!-- ==========================================================
       SIDEBAR
  ========================================================== -->
  <aside class="sidebar glass-elevated">

    <div class="sidebar-header">
      <div class="brand">
        <div class="brand-logo">KORUAL</div>
        <div class="brand-tagline">Control Center</div>
      </div>
    </div>

    <nav class="nav-menu">
      <button class="menu-item active" data-section="dashboard">
        <span>📊</span> <p>대시보드</p>
      </button>

      <button class="menu-item" data-section="products">
        <span>📦</span> <p>상품 관리</p>
      </button>

      <button class="menu-item" data-section="orders">
        <span>📮</span> <p>주문 관리</p>
      </button>

      <button class="menu-item" data-section="members">
        <span>🧑‍🤝‍🧑</span> <p>회원 관리</p>
      </button>

      <button class="menu-item" data-section="stock">
        <span>🏷️</span> <p>재고 관리</p>
      </button>

      <button class="menu-item" data-section="logs">
        <span>📝</span> <p>로그 모니터링</p>
      </button>
    </nav>

    <div class="sidebar-footer">
      <div class="sidebar-meta">
        <div class="meta-label">API 연결 상태</div>
        <div class="meta-value api-status ok" id="api-status">정상</div>
      </div>
    </div>
  </aside>


  <!-- ==========================================================
       MOBILE SIDEBAR BACKDROP
  ========================================================== -->
  <div id="sidebarBackdrop" class="sidebar-backdrop"></div>


  <!-- ==========================================================
       MAIN CONTENT
  ========================================================== -->
  <main class="main">

    <!-- ====================================================
         TOPBAR
    ===================================================== -->
    <header class="topbar glass-elevated">

      <div class="topbar-left">

        <!-- 모바일 메뉴 버튼 -->
        <button id="menuToggle" class="topbar-icon mobile" aria-label="menu">
          ☰
        </button>

        <div class="topbar-text">
          <h1 class="text-title">KORUAL CONTROL CENTER</h1>

          <div class="text-meta">
            반갑습니다, <span id="welcomeUser">USER</span>님
            <span class="meta-sync" id="last-sync">마지막 동기화: -</span>
          </div>
        </div>

      </div>

      <div class="topbar-right">

        <button id="themeToggle" class="topbar-icon" aria-label="theme">
          🌓
        </button>

        <button id="btnRefreshAll" class="btn primary small">새로고침</button>

        <button id="btnLogout" class="btn ghost small">
          로그아웃
        </button>

      </div>
    </header>




    <!-- ====================================================
         SECTION 1: 대시보드
    ===================================================== -->
    <section id="section-dashboard" class="section active">

      <div class="section-header">
        <div>
          <h2>📊 대시보드</h2>
          <p>전체 운영 데이터를 실시간으로 요약합니다</p>
        </div>
      </div>

      <!-- SUMMARY CARDS -->
      <div class="cards-grid">

        <div class="card glass-elevated">
          <label>총 상품 수</label>
          <div id="cardTotalProducts">-</div>
        </div>

        <div class="card glass-elevated">
          <label>총 주문 수</label>
          <div id="cardTotalOrders">-</div>
        </div>

        <div class="card glass-elevated">
          <label>추정 매출 합계</label>
          <div id="cardTotalRevenue">-</div>
        </div>

        <div class="card glass-elevated">
          <label>회원 수</label>
          <div id="cardTotalMembers">-</div>
        </div>

      </div>


      <!-- TODAY -->
      <div class="panel glass-elevated">
        <div class="panel-header">
          <h3>오늘 요약</h3>
        </div>

        <div class="panel-body metrics">

          <div class="metric">
            <span>오늘 주문</span>
            <div id="todayOrders">-</div>
          </div>

          <div class="metric">
            <span>오늘 매출</span>
            <div id="todayRevenue">-</div>
          </div>

          <div class="metric">
            <span>준비중 주문</span>
            <div id="todayPending">-</div>
          </div>

        </div>
      </div>


      <!-- RECENT ORDERS -->
      <div class="panel glass-elevated">
        <div class="panel-header">
          <h3>최근 주문</h3>
          <button id="goOrders" class="btn ghost small">→ 주문 관리</button>
        </div>

        <div class="table-wrapper">
          <table class="table">
            <thead>
              <tr>
                <th>주문일자</th>
                <th>주문번호</th>
                <th>상품명</th>
                <th>수량</th>
                <th>금액</th>
                <th>채널</th>
                <th>상태</th>
              </tr>
            </thead>

            <tbody id="recentOrdersBody">
              <tr><td colspan="7" class="empty">데이터 로딩중…</td></tr>
            </tbody>
          </table>
        </div>

      </div>

    </section>




    <!-- ====================================================
         SECTION 2: 상품
    ===================================================== -->
    <section id="section-products" class="section">
      <div class="section-header">
        <div>
          <h2>📦 상품 관리</h2>
          <p>상품 시트에서 불러온 목록</p>
        </div>

        <div class="section-actions">
          <input id="searchProducts" class="input" placeholder="상품명 검색" />
        </div>
      </div>

      <div class="table-wrapper glass-elevated">
        <table class="table">
          <thead>
            <tr>
              <th>상품코드</th>
              <th>상품명</th>
              <th>옵션</th>
              <th>판매가</th>
              <th>재고</th>
            </tr>
          </thead>

          <tbody id="productsBody">
            <tr><td colspan="5" class="empty">데이터 없음</td></tr>
          </tbody>
        </table>
      </div>
    </section>




    <!-- ====================================================
         SECTION 3: 주문
    ===================================================== -->
    <section id="section-orders" class="section">
      <div class="section-header">
        <div>
          <h2>📮 주문 관리</h2>
        </div>

        <div class="section-actions">
          <input id="searchOrders" class="input" placeholder="주문번호 / 고객명" />
        </div>
      </div>

      <div class="table-wrapper glass-elevated">
        <table class="table">
          <thead>
            <tr>
              <th>회원번호</th>
              <th>날짜</th>
              <th>주문번호</th>
              <th>고객명</th>
              <th>상품명</th>
              <th>수량</th>
              <th>금액</th>
              <th>상태</th>
            </tr>
          </thead>

          <tbody id="ordersBody">
            <tr><td colspan="8" class="empty">데이터 없음</td></tr>
          </tbody>
        </table>
      </div>
    </section>




    <!-- ====================================================
         SECTION 4: 회원
    ===================================================== -->
    <section id="section-members" class="section">
      <div class="section-header">
        <div>
          <h2>🧑‍🤝‍🧑 회원 관리</h2>
        </div>

        <div class="section-actions">
          <input id="searchMembers" class="input" placeholder="이름 / 이메일 / 등급" />
        </div>
      </div>

      <div class="table-wrapper glass-elevated">
        <table class="table">
          <thead>
            <tr>
              <th>회원번호</th>
              <th>이름</th>
              <th>전화번호</th>
              <th>이메일</th>
              <th>등급</th>
              <th>누적매출</th>
            </tr>
          </thead>

          <tbody id="membersBody">
            <tr><td colspan="6" class="empty">데이터 없음</td></tr>
          </tbody>
        </table>
      </div>
    </section>




    <!-- ====================================================
         SECTION 5: 재고
    ===================================================== -->
    <section id="section-stock" class="section">
      <div class="section-header">
        <div>
          <h2>🏷️ 재고 관리</h2>
        </div>
      </div>

      <div class="table-wrapper glass-elevated">
        <table class="table">
          <thead>
            <tr>
              <th>상품코드</th>
              <th>상품명</th>
              <th>현재 재고</th>
              <th>안전 재고</th>
              <th>상태</th>
            </tr>
          </thead>

          <tbody id="stockBody">
            <tr><td colspan="5" class="empty">데이터 없음</td></tr>
          </tbody>
        </table>
      </div>
    </section>




    <!-- ====================================================
         SECTION 6: 로그
    ===================================================== -->
    <section id="section-logs" class="section">
      <div class="section-header">
        <div>
          <h2>📝 로그 모니터링</h2>
        </div>
      </div>

      <div class="table-wrapper glass-elevated">
        <table class="table">
          <thead>
            <tr>
              <th>시간</th>
              <th>타입</th>
              <th>메시지</th>
            </tr>
          </thead>

          <tbody id="logsBody">
            <tr><td colspan="3" class="empty">데이터 없음</td></tr>
          </tbody>
        </table>
      </div>
    </section>

  </main>

</div>

<script src="app.js"></script>

</body>
</html>
