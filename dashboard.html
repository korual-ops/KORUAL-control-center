<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />

  <!-- ë¡œê·¸ì¸ ì„¸ì…˜ ê²€ì¦ (ì§ì ‘ URL ì…ë ¥ ì°¨ë‹¨) -->
  <script>
    (function () {
      try {
        const raw = localStorage.getItem("korual_user");
        if (!raw) return location.replace("index.html");
        const user = JSON.parse(raw);
        if (!user || !user.username) return location.replace("index.html");
      } catch (e) {
        return location.replace("index.html");
      }
    })();
  </script>

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KORUAL CONTROL CENTER â€“ Dashboard</title>

  <!-- í”„ë¡ íŠ¸ì—ì„œ app.jsê°€ ì½ì–´ê°ˆ ë©”íƒ€ ì •ë³´ -->
  <script>
    window.KORUAL_META_APP = {
      app: {
        id: "korual-control-center",
        name: "KORUAL CONTROL CENTER",
        version: "v1.0-live",
        env: "prod"
      },
      api: {
        baseUrl: "https://script.google.com/macros/s/AKfycby2FlBu4YXEpeGUAvtXWTbYCi4BNGHNl7GCsaQtsCHuvGXYMELveOkoctEAepFg2F_0/exec",
        secret: "KORUAL-ONLY"
      }
    };
  </script>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            korual: {
              bg: "#020617",
              accent: "#38bdf8",
              accent2: "#6366f1",
            },
          },
        },
      },
    };
  </script>

  <!-- ìŠ¤íƒ€ì¼ -->
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="modal.css" />
</head>

<body class="theme-dark bg-slate-950 text-slate-50">
  <!-- í•˜ì´ì—”ë“œ ë°°ê²½ ë ˆì´ì–´ -->
  <div class="fixed inset-0 -z-10 bg-slate-950">
    <div
      class="pointer-events-none absolute inset-0 opacity-80"
      style="
        background:
          radial-gradient(1200px 800px at 0% 0%, rgba(59,130,246,.24), transparent 65%),
          radial-gradient(900px 700px at 100% 100%, rgba(168,85,247,.30), transparent 65%),
          linear-gradient(to bottom right, #020617, #020617);
      "
    ></div>
    <div
      class="pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(15,23,42,0.8),transparent_60%)] opacity-70 mix-blend-soft-light"
    ></div>
    <div
      class="pointer-events-none absolute inset-0 bg-[linear-gradient(rgba(15,23,42,0.72)_1px,transparent_1px),linear-gradient(90deg,rgba(15,23,42,0.72)_1px,transparent_1px)] bg-[length:80px_80px] opacity-60"
      style="mask-image: radial-gradient(circle at center, black 0%, transparent 65%);"
    ></div>
    <!-- ì¤‘ì•™ ë ˆì´ë” ë§ -->
    <div class="pointer-events-none absolute inset-0 flex items-center justify-center">
      <div
        class="relative w-[min(720px,80vw)] h-[min(720px,80vw)] rounded-full border border-slate-700/40 shadow-[0_0_0_1px_rgba(15,23,42,0.95),0_0_120px_rgba(56,189,248,0.25)]"
      >
        <div
          class="absolute -inset-[10%] rounded-full"
          style="
            background: conic-gradient(
              from 220deg,
              rgba(56,189,248,0.35),
              transparent 45%,
              transparent 100%
            );
            filter: blur(6px);
            animation: korualRadarSweep 18s linear infinite;
          "
        ></div>
      </div>
    </div>
    <!-- ORB -->
    <div
      class="pointer-events-none absolute w-60 h-60 rounded-full blur-3xl bg-[radial-gradient(circle_at_30%_30%,rgba(56,189,248,.75),transparent_60%)] top-8 left-6 opacity-80 animate-[korualOrb1_16s_ease-in-out_infinite_alternate]"
    ></div>
    <div
      class="pointer-events-none absolute w-72 h-72 rounded-full blur-3xl bg-[radial-gradient(circle_at_70%_60%,rgba(129,140,248,.85),transparent_60%)] bottom-6 right-10 opacity-80 animate-[korualOrb2_18s_ease-in-out_infinite_alternate]"
    ></div>
  </div>

  <style>
    @keyframes korualRadarSweep {
      from { transform: rotate(0deg); }
      to   { transform: rotate(360deg); }
    }
    @keyframes korualOrb1 {
      0%   { transform: translate3d(0,0,0); }
      100% { transform: translate3d(24px,36px,0); }
    }
    @keyframes korualOrb2 {
      0%   { transform: translate3d(0,0,0); }
      100% { transform: translate3d(-30px,-26px,0); }
    }
  </style>

  <!-- ê¸€ë¡œë²Œ ìŠ¤í”¼ë„ˆ -->
  <div
    id="globalSpinner"
    class="spinner-overlay hidden flex items-center justify-center fixed inset-0 z-40 bg-slate-950/80 backdrop-blur-sm"
  >
    <div
      class="spinner-core relative flex flex-col items-center gap-3 rounded-2xl border border-slate-700/80 bg-slate-950/95 px-6 py-5 shadow-[0_30px_90px_rgba(15,23,42,0.98)]"
    >
      <div
        class="spinner-ring w-10 h-10 rounded-full border-2 border-slate-700 border-t-sky-400 animate-spin"
      ></div>
      <div class="spinner-dot hidden"></div>
      <div class="spinner-label text-xs text-slate-300">
        KORUAL ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤â€¦
      </div>
    </div>
  </div>

  <!-- í† ìŠ¤íŠ¸ ë£¨íŠ¸ -->
  <div
    id="toastRoot"
    class="toast-container fixed inset-x-0 bottom-4 flex justify-center px-4 pointer-events-none z-50"
  ></div>

  <!-- ì•± ì‰˜ -->
  <div class="app-shell relative z-10 flex h-screen">

    <!-- ì‚¬ì´ë“œë°” -->
    <aside
      class="sidebar hidden md:flex flex-col w-64 border-r border-slate-800/80 bg-slate-950/80/80 backdrop-blur-2xl px-4 py-5 shadow-[0_24px_80px_rgba(15,23,42,0.95)]"
    >
      <div class="brand-block mb-6">
        <div class="flex items-center gap-3">
          <div
            class="w-10 h-10 rounded-2xl bg-white text-slate-900 grid place-content-center text-lg font-bold shadow-[0_18px_40px_rgba(15,23,42,0.95)]"
          >
            K
          </div>
          <div>
            <div class="brand-title text-sm font-semibold tracking-[0.18em] uppercase text-slate-300">
              KORUAL
            </div>
            <div class="brand-subtitle text-xs text-slate-400">Control Center</div>
          </div>
        </div>
        <div class="mt-4 rounded-2xl border border-sky-500/25 bg-gradient-to-br from-slate-950/90 via-slate-950/80 to-slate-900/90 px-3 py-2 text-[11px] text-slate-300">
          <div class="flex items-center justify-between">
            <span>ê´€ì œ ëª¨ë“œ</span>
            <span class="px-2 py-0.5 rounded-full text-[10px] bg-emerald-500/15 text-emerald-300 border border-emerald-400/60">
              LIVE
            </span>
          </div>
          <p class="mt-1 text-[10px] text-slate-400">
            ì£¼ë¬¸ Â· íšŒì› Â· ì¬ê³  Â· ë¡œê·¸ë¥¼ í•œ ë²ˆì— ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.
          </p>
        </div>
      </div>

      <nav class="nav flex-1 flex flex-col gap-1 text-[13px]">
        <button class="nav-link active" data-section="dashboard">
          <span class="nav-emoji">ğŸ“Š</span>
          <span>ëŒ€ì‹œë³´ë“œ</span>
        </button>
        <button class="nav-link" data-section="products">
          <span class="nav-emoji">ğŸ“¦</span>
          <span>ìƒí’ˆ ê´€ë¦¬</span>
        </button>
        <button class="nav-link" data-section="orders">
          <span class="nav-emoji">ğŸ“®</span>
          <span>ì£¼ë¬¸ ê´€ë¦¬</span>
        </button>
        <button class="nav-link" data-section="members">
          <span class="nav-emoji">ğŸ§‘â€ğŸ¤â€ğŸ§‘</span>
          <span>íšŒì› ê´€ë¦¬</span>
        </button>
        <button class="nav-link" data-section="stock">
          <span class="nav-emoji">ğŸ¬</span>
          <span>ì¬ê³  ê´€ë¦¬</span>
        </button>
        <button class="nav-link" data-section="logs">
          <span class="nav-emoji">ğŸ“</span>
          <span>ë¡œê·¸ ëª¨ë‹ˆí„°ë§</span>
        </button>
      </nav>

      <div class="sidebar-footer mt-4 pt-4 border-t border-slate-800/70 text-[11px]">
        <div class="api-status-row flex flex-col gap-1">
          <div class="api-status-label text-slate-400">API ì—°ê²° ìƒíƒœ</div>
          <div class="api-status-dot-wrap flex items-center gap-2">
            <span
              id="apiStatusDot"
              class="status-dot inline-block w-2.5 h-2.5 rounded-full bg-amber-400 shadow-[0_0_0_4px_rgba(251,191,36,0.35)]"
            ></span>
            <span id="apiStatusText" class="api-status-text text-slate-300">
              Checkingâ€¦
            </span>
          </div>
        </div>
        <div class="api-meta mt-2 text-slate-500">
          Ping <span id="apiPing">- ms</span>
        </div>
      </div>
    </aside>

    <!-- ëª¨ë°”ì¼ ì‚¬ì´ë“œë°” ë°±ë“œë¡­ -->
    <div
      id="sidebarBackdrop"
      class="sidebar-backdrop fixed inset-0 bg-slate-950/70 backdrop-blur-sm z-30 hidden md:hidden"
    ></div>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <main class="content flex-1 flex flex-col min-w-0">

      <!-- ìƒë‹¨ë°” -->
      <header
        class="topbar flex items-center justify-between px-4 sm:px-6 lg:px-8 py-3 border-b border-slate-800/80 bg-slate-950/80 backdrop-blur-2xl shadow-[0_18px_60px_rgba(15,23,42,0.9)]"
      >
        <div class="topbar-left flex items-center gap-3">
          <!-- ëª¨ë°”ì¼ ë©”ë‰´ ë²„íŠ¼ -->
          <button
            id="menuToggle"
            class="mobile-menu-btn md:hidden flex flex-col justify-between w-8 h-8 p-1.5 rounded-xl border border-slate-700/80 bg-slate-900/90"
            type="button"
            aria-label="ë©”ë‰´ ì—´ê¸°"
          >
            <span class="block h-[2px] rounded-full bg-slate-200"></span>
            <span class="block h-[2px] rounded-full bg-slate-400"></span>
            <span class="block h-[2px] rounded-full bg-slate-500"></span>
          </button>

          <div class="topbar-text">
            <div class="topbar-title text-xs sm:text-sm font-semibold tracking-[0.24em] uppercase text-slate-300">
              KORUAL CONTROL CENTER
              <span
                class="topbar-badge ml-2 align-middle px-2 py-0.5 rounded-full text-[9px] border border-emerald-400/70 bg-emerald-500/15 text-emerald-200"
              >
                LIVE
              </span>
            </div>
            <div class="topbar-meta mt-0.5 text-[11px] text-slate-400">
              ë°˜ê°‘ìŠµë‹ˆë‹¤, <span id="welcomeUser" class="text-sky-300 font-medium">KORUAL</span>ë‹˜
              <span class="topbar-divider mx-1 text-slate-600">Â·</span>
              <span class="last-sync" id="last-sync">ë§ˆì§€ë§‰ ë™ê¸°í™” ëŒ€ê¸° ì¤‘â€¦</span>
            </div>
          </div>
        </div>

        <div class="topbar-right flex items-center gap-2 sm:gap-3">
          <!-- í…Œë§ˆ í† ê¸€ -->
          <button
            id="themeToggle"
            class="theme-toggle inline-flex items-center gap-2 text-[11px] px-2.5 py-1.5 rounded-full border border-slate-700/80 bg-slate-900/90"
            type="button"
          >
            <span
              class="theme-toggle-label text-slate-300"
              data-light="Light"
              data-dark="Dark"
            >
              Dark
            </span>
            <span class="theme-toggle-track relative inline-flex items-center w-8 h-4 rounded-full bg-slate-700">
              <span class="theme-toggle-thumb absolute h-3 w-3 rounded-full bg-white shadow translate-x-1 transition-transform"></span>
            </span>
          </button>

          <!-- ì „ì²´ ìƒˆë¡œê³ ì¹¨ -->
          <button
            id="btnRefreshAll"
            class="primary-btn inline-flex items-center gap-1.5 rounded-full border border-sky-500/70 bg-gradient-to-r from-sky-500 to-indigo-500 px-3 py-1.5 text-[11px] font-medium shadow-[0_18px_40px_rgba(15,23,42,0.98)]"
            type="button"
          >
            ğŸ”„ <span>ì „ì²´ ìƒˆë¡œê³ ì¹¨</span>
          </button>

          <!-- ë¡œê·¸ì•„ì›ƒ -->
          <button
            id="btnLogout"
            class="ghost-btn logout-btn inline-flex items-center rounded-full border border-slate-700/80 bg-slate-900/80 px-3 py-1.5 text-[11px] text-slate-300 hover:border-rose-500/70 hover:text-rose-300 hover:bg-rose-950/60 transition-colors"
            type="button"
          >
            ë¡œê·¸ì•„ì›ƒ
          </button>
        </div>
      </header>

      <!-- ì»¨í…ì¸  ë˜í¼ -->
      <div class="flex-1 min-h-0 overflow-auto px-3 sm:px-5 lg:px-7 py-3 sm:py-4">

        <!-- 1) ëŒ€ì‹œë³´ë“œ -->
        <section
          id="section-dashboard"
          class="section active space-y-4 sm:space-y-5"
        >
          <div class="section-header-row flex items-center justify-between gap-3 flex-wrap">
            <div>
              <h2 class="text-lg sm:text-xl font-semibold flex items-center gap-2">
                <span>ğŸ“Š ëŒ€ì‹œë³´ë“œ</span>
              </h2>
              <p class="section-desc text-xs sm:text-sm text-slate-400 mt-1">
                KORUAL ì „ ì±„ë„ ë°ì´í„°ë¥¼ í•œëˆˆì— ë³´ëŠ” í•˜ì´ì—”ë“œ ê´€ì œíƒ‘ì…ë‹ˆë‹¤.
              </p>
            </div>
            <div class="section-actions">
              <span
                class="section-kpi-pill inline-flex items-center gap-1 rounded-full border border-emerald-400/60 bg-emerald-500/10 px-3 py-1 text-[11px] text-emerald-200"
              >
                <span class="h-1.5 w-1.5 rounded-full bg-emerald-400 animate-pulse"></span>
                <span>ì‹¤ì‹œê°„ ìš”ì•½ ëª¨ë“œ</span>
              </span>
            </div>
          </div>

          <!-- ìš”ì•½ ì¹´ë“œ -->
          <div class="cards-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3">
            <div class="card card-metric rounded-2xl border border-slate-800/80 bg-slate-950/90 p-3.5 shadow-[0_18px_55px_rgba(15,23,42,0.9)]">
              <div class="card-label text-xs text-slate-400 mb-1">ì´ ìƒí’ˆ ìˆ˜</div>
              <div class="card-value text-2xl font-semibold tracking-tight" id="cardTotalProducts">-</div>
              <div class="card-submeta text-[11px] text-slate-500 mt-1">PRODUCTS ì‹œíŠ¸ ê¸°ì¤€</div>
            </div>

            <div class="card card-metric rounded-2xl border border-slate-800/80 bg-slate-950/90 p-3.5 shadow-[0_18px_55px_rgba(15,23,42,0.9)]">
              <div class="card-label text-xs text-slate-400 mb-1">ì´ ì£¼ë¬¸ ìˆ˜</div>
              <div class="card-value text-2xl font-semibold tracking-tight" id="cardTotalOrders">-</div>
              <div class="card-submeta text-[11px] text-slate-500 mt-1">ORDERS ì‹œíŠ¸ ê¸°ì¤€</div>
            </div>

            <div class="card card-metric rounded-2xl border border-slate-800/80 bg-slate-950/90 p-3.5 shadow-[0_18px_55px_rgba(15,23,42,0.9)]">
              <div class="card-label text-xs text-slate-400 mb-1">ì¶”ì • ë§¤ì¶œ í•©ê³„</div>
              <div class="card-value text-2xl font-semibold tracking-tight" id="cardTotalRevenue">-</div>
              <div class="card-submeta text-[11px] text-slate-500 mt-1">ì£¼ë¬¸ ê¸ˆì•¡ í•©ê³„(ì›í™”)</div>
            </div>

            <div class="card card-metric rounded-2xl border border-slate-800/80 bg-slate-950/90 p-3.5 shadow-[0_18px_55px_rgba(15,23,42,0.9)]">
              <div class="card-label text-xs text-slate-400 mb-1">íšŒì› ìˆ˜</div>
              <div class="card-value text-2xl font-semibold tracking-tight" id="cardTotalMembers">-</div>
              <div class="card-submeta text-[11px] text-slate-500 mt-1">MEMBERS ì‹œíŠ¸ ê¸°ì¤€</div>
            </div>
          </div>

          <!-- ì˜¤ëŠ˜ ìš”ì•½ -->
          <div class="panel rounded-2xl border border-slate-800/80 bg-slate-950/90 shadow-[0_22px_70px_rgba(15,23,42,0.95)]">
            <div class="panel-header flex items-center justify-between px-4 pt-3 pb-2 border-b border-slate-800/80">
              <h3 class="text-sm font-semibold">ì˜¤ëŠ˜ ìš”ì•½</h3>
              <div class="panel-header-meta text-[11px] text-slate-400">
                <span id="todayDateLabel"></span>
              </div>
            </div>

            <div class="panel-body px-4 py-3">
              <div class="today-metrics grid grid-cols-1 sm:grid-cols-3 gap-3">
                <div class="today-metric rounded-xl border border-slate-800/80 bg-slate-950/90 px-3 py-2.5">
                  <span class="today-label text-[11px] text-slate-400">ì˜¤ëŠ˜ ì£¼ë¬¸</span>
                  <span class="today-value block text-xl font-semibold mt-1" id="todayOrders">-</span>
                  <span class="today-caption text-[11px] text-slate-500 mt-1">
                    ì‹ ê·œ ORDERS ì¹´ìš´íŠ¸
                  </span>
                </div>

                <div class="today-metric rounded-xl border border-slate-800/80 bg-slate-950/90 px-3 py-2.5">
                  <span class="today-label text-[11px] text-slate-400">ì˜¤ëŠ˜ ë§¤ì¶œ</span>
                  <span class="today-value block text-xl font-semibold mt-1" id="todayRevenue">-</span>
                  <span class="today-caption text-[11px] text-slate-500 mt-1">
                    ë‹¹ì¼ í•©ê³„ ê¸ˆì•¡
                  </span>
                </div>

                <div class="today-metric rounded-xl border border-slate-800/80 bg-slate-950/90 px-3 py-2.5">
                  <span class="today-label text-[11px] text-slate-400">ì¤€ë¹„ì¤‘ ì£¼ë¬¸</span>
                  <span class="today-value block text-xl font-semibold mt-1" id="todayPending">-</span>
                  <span class="today-caption text-[11px] text-slate-500 mt-1">
                    ìƒíƒœì— "ì¤€ë¹„ì¤‘" í¬í•¨
                  </span>
                </div>
              </div>
            </div>
          </div>

          <!-- ìµœê·¼ ì£¼ë¬¸ -->
          <div class="panel rounded-2xl border border-slate-800/80 bg-slate-950/90 shadow-[0_22px_70px_rgba(15,23,42,0.95)]">
            <div class="panel-header flex items-center justify-between px-4 pt-3 pb-2 border-b border-slate-800/80">
              <h3 class="text-sm font-semibold">ìµœê·¼ ì£¼ë¬¸</h3>
              <div class="panel-header-actions">
                <button
                  id="goOrders"
                  class="ghost-btn small inline-flex items-center gap-1 rounded-full border border-slate-700/80 bg-slate-900/80 px-3 py-1 text-[11px] text-slate-300 hover:border-sky-400/80 hover:bg-slate-900/95"
                  type="button"
                >
                  â†’ ì£¼ë¬¸ ê´€ë¦¬ ë°”ë¡œê°€ê¸°
                </button>
              </div>
            </div>

            <div class="panel-body px-4 py-3">
              <div class="table-wrapper overflow-auto rounded-xl border border-slate-800/80 bg-slate-950/90">
                <table class="w-full text-xs">
                  <thead class="bg-slate-900/95 text-slate-400 text-[11px] sticky top-0">
                    <tr>
                      <th class="px-2 py-1.5 text-left">ì£¼ë¬¸ì¼ì</th>
                      <th class="px-2 py-1.5 text-left">ì£¼ë¬¸ë²ˆí˜¸</th>
                      <th class="px-2 py-1.5 text-left">ìƒí’ˆëª…</th>
                      <th class="px-2 py-1.5 text-right">ìˆ˜ëŸ‰</th>
                      <th class="px-2 py-1.5 text-right">ê¸ˆì•¡</th>
                      <th class="px-2 py-1.5 text-left">ì±„ë„</th>
                      <th class="px-2 py-1.5 text-left">ìƒíƒœ</th>
                    </tr>
                  </thead>
                  <tbody id="recentOrdersBody" class="text-[11px]">
                    <tr>
                      <td colspan="7" class="empty-state px-3 py-6 text-center text-slate-500">
                        ìµœê·¼ ì£¼ë¬¸ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤â€¦
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </section>

        <!-- 2) ìƒí’ˆ ê´€ë¦¬ -->
        <section id="section-products" class="section hidden space-y-4 sm:space-y-5">
          <div class="section-header-row flex items-center justify-between gap-3 flex-wrap">
            <div>
              <h2 class="text-lg sm:text-xl font-semibold flex items-center gap-2">
                <span>ğŸ“¦ ìƒí’ˆ ê´€ë¦¬</span>
              </h2>
              <p class="section-desc text-xs sm:text-sm text-slate-400 mt-1">
                ìì‚¬ëª°, ë§ˆì¼“, Shopee ë“± ì „ ì±„ë„ ìƒí’ˆ ì •ë³´ë¥¼ í•œ ê³³ì—ì„œ í™•ì¸í•©ë‹ˆë‹¤.
              </p>
            </div>

            <div class="section-actions flex items-center gap-2">
              <input
                id="searchProducts"
                class="input w-48 sm:w-60 rounded-full border border-slate-700/80 bg-slate-950/90 px-3 py-1.5 text-[11px] placeholder:text-slate-500"
                placeholder="ê²€ìƒ‰ (ìƒí’ˆëª… / ì½”ë“œ / ì˜µì…˜ / ì±„ë„)"
              />
            </div>
          </div>

          <div class="panel rounded-2xl border border-slate-800/80 bg-slate-950/90 shadow-[0_22px_70px_rgba(15,23,42,0.95)]">
            <div class="panel-body px-3 sm:px-4 py-3">
              <div class="table-wrapper overflow-auto rounded-xl border border-slate-800/80 bg-slate-950/90">
                <table class="w-full text-[11px]">
                  <thead class="bg-slate-900/95 text-slate-400 sticky top-0">
                    <tr>
                      <th class="px-2 py-1.5 text-left">ìƒí’ˆì½”ë“œ</th>
                      <th class="px-2 py-1.5 text-left">ìƒí’ˆëª…</th>
                      <th class="px-2 py-1.5 text-left">ì˜µì…˜</th>
                      <th class="px-2 py-1.5 text-right">íŒë§¤ê°€</th>
                      <th class="px-2 py-1.5 text-right">ì¬ê³ </th>
                      <th class="px-2 py-1.5 text-left">ì±„ë„</th>
                    </tr>
                  </thead>
                  <tbody
                    id="productsBody"
                    data-entity="products"
                    data-sheet="PRODUCTS"
                    class="text-[11px]"
                  >
                    <tr>
                      <td colspan="6" class="empty-state px-3 py-6 text-center text-slate-500">
                        ìƒí’ˆ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤â€¦
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="table-footer flex justify-end mt-3">
                <div class="pager inline-flex items-center gap-2 text-[11px]" id="productsPager">
                  <button
                    type="button"
                    data-page="prev"
                    class="px-2 py-1 rounded-full border border-slate-700/80 bg-slate-900/90"
                  >
                    ì´ì „
                  </button>
                  <span data-page-label class="text-slate-400">-</span>
                  <button
                    type="button"
                    data-page="next"
                    class="px-2 py-1 rounded-full border border-slate-700/80 bg-slate-900/90"
                  >
                    ë‹¤ìŒ
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- 3) ì£¼ë¬¸ ê´€ë¦¬ -->
        <section id="section-orders" class="section hidden space-y-4 sm:space-y-5">
          <div class="section-header-row flex items-center justify-between gap-3 flex-wrap">
            <div>
              <h2 class="text-lg sm:text-xl font-semibold flex items-center gap-2">
                <span>ğŸ“® ì£¼ë¬¸ ê´€ë¦¬</span>
              </h2>
              <p class="section-desc text-xs sm:text-sm text-slate-400 mt-1">
                ì „ì²´ ì£¼ë¬¸ íë¦„ê³¼ ë°°ì†¡ ìƒíƒœë¥¼ KORUAL ê´€ì œíƒ‘ ê¸°ì¤€ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.
              </p>
            </div>

            <div class="section-actions flex items-center gap-2">
              <input
                id="searchOrders"
                class="input w-52 sm:w-64 rounded-full border border-slate-700/80 bg-slate-950/90 px-3 py-1.5 text-[11px] placeholder:text-slate-500"
                placeholder="ê²€ìƒ‰ (ì£¼ë¬¸ë²ˆí˜¸ / ê³ ê°ëª… / ìƒíƒœ / ì±„ë„)"
              />
            </div>
          </div>

          <div class="panel rounded-2xl border border-slate-800/80 bg-slate-950/90 shadow-[0_22px_70px_rgba(15,23,42,0.95)]">
            <div class="panel-body px-3 sm:px-4 py-3">
              <div class="table-wrapper overflow-auto rounded-xl border border-slate-800/80 bg-slate-950/90">
                <table class="w-full text-[11px]">
                  <thead class="bg-slate-900/95 text-slate-400 sticky top-0">
                    <tr>
                      <th class="px-2 py-1.5 text-left">íšŒì›ë²ˆí˜¸</th>
                      <th class="px-2 py-1.5 text-left">ë‚ ì§œ</th>
                      <th class="px-2 py-1.5 text-left">ì£¼ë¬¸ë²ˆí˜¸</th>
                      <th class="px-2 py-1.5 text-left">ê³ ê°ëª…</th>
                      <th class="px-2 py-1.5 text-left">ìƒí’ˆëª…</th>
                      <th class="px-2 py-1.5 text-right">ìˆ˜ëŸ‰</th>
                      <th class="px-2 py-1.5 text-right">ê¸ˆì•¡</th>
                      <th class="px-2 py-1.5 text-left">ìƒíƒœ</th>
                      <th class="px-2 py-1.5 text-left">ì±„ë„</th>
                    </tr>
                  </thead>
                  <tbody
                    id="ordersBody"
                    data-entity="orders"
                    data-sheet="ORDERS"
                  >
                    <tr>
                      <td colspan="9" class="empty-state px-3 py-6 text-center text-slate-500">
                        ì£¼ë¬¸ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤â€¦
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="table-footer flex justify-end mt-3">
                <div class="pager inline-flex items-center gap-2 text-[11px]" id="ordersPager">
                  <button
                    type="button"
                    data-page="prev"
                    class="px-2 py-1 rounded-full border border-slate-700/80 bg-slate-900/90"
                  >
                    ì´ì „
                  </button>
                  <span data-page-label class="text-slate-400">-</span>
                  <button
                    type="button"
                    data-page="next"
                    class="px-2 py-1 rounded-full border border-slate-700/80 bg-slate-900/90"
                  >
                    ë‹¤ìŒ
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- 4) íšŒì› ê´€ë¦¬ -->
        <section id="section-members" class="section hidden space-y-4 sm:space-y-5">
          <div class="section-header-row flex items-center justify-between gap-3 flex-wrap">
            <div>
              <h2 class="text-lg sm:text-xl font-semibold flex items-center gap-2">
                <span>ğŸ§‘â€ğŸ¤â€ğŸ§‘ íšŒì› ê´€ë¦¬</span>
              </h2>
              <p class="section-desc text-xs sm:text-sm text-slate-400 mt-1">
                VIP, ë©¤ë²„ì‹­ ë“±ê¸‰, ëˆ„ì  ë§¤ì¶œì„ ê¸°ë°˜ìœ¼ë¡œ KORUAL íšŒì› í’€ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
              </p>
            </div>

            <div class="section-actions flex items-center gap-2 flex-wrap">
              <input
                id="searchMembers"
                class="input w-64 sm:w-72 rounded-full border border-slate-700/80 bg-slate-950/90 px-3 py-1.5 text-[11px] placeholder:text-slate-500"
                placeholder="ê²€ìƒ‰ (íšŒì›ë²ˆí˜¸ / ì´ë¦„ / ì´ë©”ì¼ / ì „í™”ë²ˆí˜¸ / ë“±ê¸‰)"
              />
            </div>
          </div>

          <div class="panel rounded-2xl border border-slate-800/80 bg-slate-950/90 shadow-[0_22px_70px_rgba(15,23,42,0.95)]">
            <div class="panel-body px-3 sm:px-4 py-3">
              <div class="table-wrapper overflow-auto rounded-xl border border-slate-800/80 bg-slate-950/90">
                <table class="w-full text-[11px]">
                  <thead class="bg-slate-900/95 text-slate-400 sticky top-0">
                    <tr>
                      <th class="px-2 py-1.5 text-left">íšŒì›ë²ˆí˜¸</th>
                      <th class="px-2 py-1.5 text-left">ì´ë¦„</th>
                      <th class="px-2 py-1.5 text-left">ì „í™”ë²ˆí˜¸</th>
                      <th class="px-2 py-1.5 text-left">ì´ë©”ì¼</th>
                      <th class="px-2 py-1.5 text-left">ê°€ì…ì¼</th>
                      <th class="px-2 py-1.5 text-left">ì±„ë„</th>
                      <th class="px-2 py-1.5 text-left">ë“±ê¸‰</th>
                      <th class="px-2 py-1.5 text-right">ëˆ„ì ë§¤ì¶œ</th>
                      <th class="px-2 py-1.5 text-right">í¬ì¸íŠ¸</th>
                      <th class="px-2 py-1.5 text-left">ìµœê·¼ì£¼ë¬¸ì¼</th>
                      <th class="px-2 py-1.5 text-left">ë©”ëª¨</th>
                      <th class="px-2 py-1.5 text-center">ê´€ë¦¬</th>
                    </tr>
                  </thead>
                  <tbody
                    id="membersBody"
                    data-entity="members"
                    data-sheet="MEMBERS"
                  >
                    <tr>
                      <td colspan="12" class="empty-state px-3 py-6 text-center text-slate-500">
                        íšŒì› ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤â€¦
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="table-footer flex justify-end mt-3">
                <div class="pager inline-flex items-center gap-2 text-[11px]" id="membersPager">
                  <button
                    type="button"
                    data-page="prev"
                    class="px-2 py-1 rounded-full border border-slate-700/80 bg-slate-900/90"
                  >
                    ì´ì „
                  </button>
                  <span data-page-label class="text-slate-400">-</span>
                  <button
                    type="button"
                    data-page="next"
                    class="px-2 py-1 rounded-full border border-slate-700/80 bg-slate-900/90"
                  >
                    ë‹¤ìŒ
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- 5) ì¬ê³  ê´€ë¦¬ -->
        <section id="section-stock" class="section hidden space-y-4 sm:space-y-5">
          <div class="section-header-row flex items-center justify-between gap-3 flex-wrap">
            <div>
              <h2 class="text-lg sm:text-xl font-semibold flex items-center gap-2">
                <span>ğŸ¬ ì¬ê³  ê´€ë¦¬</span>
              </h2>
              <p class="section-desc text-xs sm:text-sm text-slate-400 mt-1">
                ì…ê³ /ì¶œê³  ì—†ì´ë„ ìë™ ê³„ì‚°ëœ ì¬ê³ ë¥¼ ì°½ê³ Â·ì±„ë„ ë‹¨ìœ„ë¡œ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.
              </p>
            </div>

            <div class="section-actions flex items-center gap-2">
              <input
                id="searchStock"
                class="input w-52 sm:w-64 rounded-full border border-slate-700/80 bg-slate-950/90 px-3 py-1.5 text-[11px] placeholder:text-slate-500"
                placeholder="ê²€ìƒ‰ (ìƒí’ˆì½”ë“œ / ìƒí’ˆëª… / ìƒíƒœ / ì°½ê³  / ì±„ë„)"
              />
            </div>
          </div>

          <div class="panel rounded-2xl border border-slate-800/80 bg-slate-950/90 shadow-[0_22px_70px_rgba(15,23,42,0.95)]">
            <div class="panel-body px-3 sm:px-4 py-3">
              <div class="table-wrapper overflow-auto rounded-xl border border-slate-800/80 bg-slate-950/90">
                <table class="w-full text-[11px]">
                  <thead class="bg-slate-900/95 text-slate-400 sticky top-0">
                    <tr>
                      <th class="px-2 py-1.5 text-left">ìƒí’ˆì½”ë“œ</th>
                      <th class="px-2 py-1.5 text-left">ìƒí’ˆëª…</th>
                      <th class="px-2 py-1.5 text-right">í˜„ì¬ ì¬ê³ </th>
                      <th class="px-2 py-1.5 text-right">ì•ˆì „ ì¬ê³ </th>
                      <th class="px-2 py-1.5 text-left">ìƒíƒœ</th>
                      <th class="px-2 py-1.5 text-left">ì°½ê³ </th>
                      <th class="px-2 py-1.5 text-left">ì±„ë„</th>
                      <th class="px-2 py-1.5 text-center">ê´€ë¦¬</th>
                    </tr>
                  </thead>
                  <tbody
                    id="stockBody"
                    data-entity="stock"
                    data-sheet="STOCK"
                  >
                    <tr>
                      <td colspan="8" class="empty-state px-3 py-6 text-center text-slate-500">
                        ì¬ê³  ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤â€¦
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="table-footer flex justify-end mt-3">
                <div class="pager inline-flex items-center gap-2 text-[11px]" id="stockPager">
                  <button
                    type="button"
                    data-page="prev"
                    class="px-2 py-1 rounded-full border border-slate-700/80 bg-slate-900/90"
                  >
                    ì´ì „
                  </button>
                  <span data-page-label class="text-slate-400">-</span>
                  <button
                    type="button"
                    data-page="next"
                    class="px-2 py-1 rounded-full border border-slate-700/80 bg-slate-900/90"
                  >
                    ë‹¤ìŒ
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- 6) ë¡œê·¸ ëª¨ë‹ˆí„°ë§ -->
        <section id="section-logs" class="section hidden space-y-4 sm:space-y-5">
          <div class="section-header-row flex items-center justify-between gap-3 flex-wrap">
            <div>
              <h2 class="text-lg sm:text-xl font-semibold flex items-center gap-2">
                <span>ğŸ“ ë¡œê·¸ ëª¨ë‹ˆí„°ë§</span>
              </h2>
              <p class="section-desc text-xs sm:text-sm text-slate-400 mt-1">
                ìë™í™” ìŠ¤í¬ë¦½íŠ¸, API í˜¸ì¶œ, ì•Œë¦¼ ê¸°ë¡ì„ í•œ ë²ˆì— ì¶”ì í•©ë‹ˆë‹¤.
              </p>
            </div>

            <div class="section-actions flex items-center gap-2">
              <input
                id="searchLogs"
                class="input w-52 sm:w-64 rounded-full border border-slate-700/80 bg-slate-950/90 px-3 py-1.5 text-[11px] placeholder:text-slate-500"
                placeholder="ê²€ìƒ‰ (ì‹œê°„ / íƒ€ì… / ë©”ì‹œì§€ / ìƒì„¸)"
              />
            </div>
          </div>

          <div class="panel rounded-2xl border border-slate-800/80 bg-slate-950/90 shadow-[0_22px_70px_rgba(15,23,42,0.95)]">
            <div class="panel-body px-3 sm:px-4 py-3">
              <div class="table-wrapper overflow-auto rounded-xl border border-slate-800/80 bg-slate-950/90">
                <table class="w-full text-[11px]">
                  <thead class="bg-slate-900/95 text-slate-400 sticky top-0">
                    <tr>
                      <th class="px-2 py-1.5 text-left">ì‹œê°„</th>
                      <th class="px-2 py-1.5 text-left">íƒ€ì…</th>
                      <th class="px-2 py-1.5 text-left">ë©”ì‹œì§€</th>
                      <th class="px-2 py-1.5 text-left">ìƒì„¸</th>
                    </tr>
                  </thead>
                  <tbody
                    id="logsBody"
                    data-entity="logs"
                    data-sheet="LOGS"
                  >
                    <tr>
                      <td colspan="4" class="empty-state px-3 py-6 text-center text-slate-500">
                        ë¡œê·¸ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤â€¦
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="table-footer flex justify-end mt-3">
                <div class="pager inline-flex items-center gap-2 text-[11px]" id="logsPager">
                  <button
                    type="button"
                    data-page="prev"
                    class="px-2 py-1 rounded-full border border-slate-700/80 bg-slate-900/90"
                  >
                    ì´ì „
                  </button>
                  <span data-page-label class="text-slate-400">-</span>
                  <button
                    type="button"
                    data-page="next"
                    class="px-2 py-1 rounded-full border border-slate-700/80 bg-slate-900/90"
                  >
                    ë‹¤ìŒ
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Footer -->
        <footer class="footer mt-4 text-[11px] text-slate-500">
          <div class="footer-inner py-3 text-center border-t border-slate-800/70">
            Â© 2025 KORUAL Control Center Â· All Systems Automated
          </div>
        </footer>
      </div>
    </main>
  </div>

  <!-- ëª¨ë‹¬ ë ˆì´ì–´ -->
  <div
    id="korualModalLayer"
    class="modal-layer"
    data-modal-layer
    style="display:none;"
  >
    <div id="korualModalBackdrop" class="modal-backdrop"></div>

    <!-- ìˆ˜ì • ëª¨ë‹¬ -->
    <div id="rowEditModal" class="modal-panel" data-type="edit">
      <div class="modal-header">
        <h3 class="modal-title">
          <span>í–‰ ìˆ˜ì •</span>
        </h3>
        <button type="button" class="modal-close-btn" data-close-modal>âœ•</button>
      </div>

      <div class="modal-body">
        <div class="modal-meta">
          <span id="rowEditEntityLabel">-</span>
          <span id="rowEditRowLabel" class="row-label">ROW: -</span>
        </div>

        <div id="rowEditFields" class="modal-fields"></div>
      </div>

      <div class="modal-footer">
        <button type="button" id="rowEditSave" class="primary-btn">ì €ì¥</button>
        <button type="button" class="ghost-btn" data-close-modal>ì·¨ì†Œ</button>
      </div>
    </div>

    <!-- ì‚­ì œ ëª¨ë‹¬ -->
    <div
      id="rowDeleteModal"
      class="modal-panel"
      data-type="delete"
      data-modal-delete
      style="display:none;"
    >
      <div class="modal-header">
        <h3 class="modal-title">í–‰ ì‚­ì œ</h3>
        <button type="button" class="modal-close-btn" data-close-modal>âœ•</button>
      </div>

      <div class="modal-body">
        <p id="rowDeleteMessage">
          ì„ íƒí•œ í–‰ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?
        </p>
        <div class="modal-meta">
          <span id="rowDeleteEntityLabel">-</span>
          <span id="rowDeleteRowLabel" class="row-label">ROW: -</span>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" id="rowDeleteConfirm" class="primary-btn">ì‚­ì œ</button>
        <button type="button" class="ghost-btn" data-close-modal>ì·¨ì†Œ</button>
      </div>
    </div>
  </div>

  <!-- JS ì—°ê²° -->
  <script src="app.js"></script>
  <script src="modal.js"></script>

  <!-- ëª¨ë‹¬ ì „ì—­ í—¬í¼ -->
  <script>
    (function () {
      const layer      = document.getElementById("korualModalLayer");
      const backdrop   = document.getElementById("korualModalBackdrop");
      const editModal  = document.getElementById("rowEditModal");
      const deleteModal= document.getElementById("rowDeleteModal");

      function closeAll() {
        if (!layer) return;
        layer.style.display = "none";
        if (editModal)  editModal.style.display = "none";
        if (deleteModal) deleteModal.style.display = "none";
        document.body.classList.remove("modal-open");
      }

      document.querySelectorAll("[data-close-modal]").forEach(btn => {
        btn.addEventListener("click", closeAll);
      });
      if (backdrop) {
        backdrop.addEventListener("click", closeAll);
      }

      window.KORUAL_MODAL = {
        closeAll,

        openEdit(payload) {
          if (!layer || !editModal) return;

          layer.style.display = "flex";
          document.body.classList.add("modal-open");
          editModal.style.display = "block";
          if (deleteModal) deleteModal.style.display = "none";

          const entityLabelMap = {
            members: "íšŒì›",
            orders: "ì£¼ë¬¸",
            products: "ìƒí’ˆ",
            stock: "ì¬ê³ ",
            logs: "ë¡œê·¸"
          };
          const entityName = entityLabelMap[payload.entity] || payload.entity || "-";
          document.getElementById("rowEditEntityLabel").textContent = "[" + entityName + "]";
          document.getElementById("rowEditRowLabel").textContent    = "ROW: " + payload.rowIndex;

          const wrap = document.getElementById("rowEditFields");
          if (!wrap) return;
          wrap.innerHTML = "";

          const data = payload.data || {};
          Object.keys(data).forEach((key) => {
            const field = document.createElement("div");
            field.className = "modal-field-row";

            const label = document.createElement("label");
            label.className = "modal-label";
            label.textContent = key;

            const input = document.createElement("input");
            input.className = "input";
            input.value = data[key] != null ? data[key] : "";
            input.dataset.fieldKey = key;

            field.appendChild(label);
            field.appendChild(input);
            wrap.appendChild(field);
          });

          const saveBtn = document.getElementById("rowEditSave");
          if (saveBtn) {
            saveBtn.dataset.entity   = payload.entity || "";
            saveBtn.dataset.sheet    = payload.sheet  || "";
            saveBtn.dataset.rowIndex = String(payload.rowIndex || "");
          }
        },

        openDelete(payload) {
          if (!layer || !deleteModal) return;

          layer.style.display = "flex";
          document.body.classList.add("modal-open");
          deleteModal.style.display = "block";
          if (editModal) editModal.style.display = "none";

          const entityLabelMap = {
            members: "íšŒì›",
            orders: "ì£¼ë¬¸",
            products: "ìƒí’ˆ",
            stock: "ì¬ê³ ",
            logs: "ë¡œê·¸"
          };
          const entityName = entityLabelMap[payload.entity] || payload.entity || "-";
          document.getElementById("rowDeleteEntityLabel").textContent = "[" + entityName + "]";
          document.getElementById("rowDeleteRowLabel").textContent    = "ROW: " + payload.rowIndex;

          const msg = payload.title
            ? "ë‹¤ìŒ ë°ì´í„°ë¥¼ ì‚­ì œí• ê¹Œìš”?\n" + payload.title
            : "ì„ íƒí•œ í–‰ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?";
          document.getElementById("rowDeleteMessage").textContent = msg;

          const delBtn = document.getElementById("rowDeleteConfirm");
          if (delBtn) {
            delBtn.dataset.entity   = payload.entity || "";
            delBtn.dataset.sheet    = payload.sheet  || "";
            delBtn.dataset.rowIndex = String(payload.rowIndex || "");
          }
        }
      };
    })();
  </script>
</body>
</html>
