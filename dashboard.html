<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />

  <!-- ì¦‰ì‹œ ë¡œê·¸ì¸ ì„¸ì…˜ ê²€ì¦ -->
  <script>
    (function () {
      try {
        const raw = localStorage.getItem("korual_user");
        if (!raw) return location.replace("index.html");
        const user = JSON.parse(raw);
        if (!user || !user.username) return location.replace("index.html");
      } catch {
        return location.replace("index.html");
      }
    })();
  </script>

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KORUAL CONTROL CENTER</title>

  <!-- ê¸°ë³¸ ìŠ¤íƒ€ì¼ + ëª¨ë‹¬ ìŠ¤íƒ€ì¼ -->
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="modal.css" />

  <!-- í•˜ì´ì—”ë“œ ì „ìš© í°íŠ¸ -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet" />

  <!-- í•˜ì´ì—”ë“œ KORUAL í…Œë§ˆ ì˜¤ë²„ë¼ì´ë“œ -->
  <style>
    :root {
      --korual-bg: #050509;
      --korual-bg-soft: #090a11;
      --korual-bg-softer: #0f1018;
      --korual-border-soft: rgba(255,255,255,0.09);
      --korual-border-strong: rgba(255,255,255,0.16);
      --korual-text: #f7f7f7;
      --korual-text-soft: #a9acb8;
      --korual-accent: #d6a954;
      --korual-accent-soft: rgba(214,169,84,0.18);
      --korual-danger: #ff4c5b;
      --korual-radius-xl: 26px;
      --korual-radius-lg: 20px;
      --korual-radius-md: 14px;
      --korual-shadow-soft: 0 24px 60px rgba(0,0,0,0.85);
      --korual-marble:
        radial-gradient(circle at 0 0, #32323c 0, #050509 52%),
        radial-gradient(circle at 100% 100%, #1d1d26 0, #050509 60%);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Poppins", "Noto Sans KR", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      color: var(--korual-text);
      background:
        radial-gradient(circle at top, #18182b 0, #050509 52%),
        radial-gradient(circle at bottom, #040308 0, #050509 55%);
      -webkit-font-smoothing: antialiased;
    }

    body::before {
      content: "";
      position: fixed;
      inset: -40%;
      background:
        radial-gradient(circle at 10% 0, rgba(214,169,84,0.18) 0, transparent 40%),
        radial-gradient(circle at 90% 100%, rgba(118,190,255,0.12) 0, transparent 45%);
      opacity: 0.9;
      pointer-events: none;
      z-index: -1;
    }

    /* ì•± ì‰˜ ì „ì²´ */
    .app-shell {
      max-width: 1320px;
      margin: 24px auto;
      padding: 18px;
      border-radius: 30px;
      border: 1px solid rgba(255,255,255,0.08);
      background:
        linear-gradient(135deg, rgba(255,255,255,0.06), transparent 36%),
        var(--korual-marble);
      box-shadow: var(--korual-shadow-soft);
      display: grid;
      grid-template-columns: 260px minmax(0, 1fr);
      gap: 16px;
      position: relative;
      overflow: hidden;
    }

    @media (max-width: 960px) {
      .app-shell {
        margin: 12px;
        padding: 12px;
        grid-template-columns: minmax(0, 1fr);
      }
    }

    /* ì‚¬ì´ë“œë°” */
    .sidebar {
      position: relative;
      padding: 18px 16px 16px;
      border-radius: 24px;
      background: linear-gradient(
          145deg,
          rgba(255,255,255,0.12),
          transparent 40%
        ),
        radial-gradient(circle at 0 0, rgba(214,169,84,0.24), transparent 55%),
        rgba(3,3,8,0.92);
      border: 1px solid rgba(255,255,255,0.18);
      box-shadow: 0 18px 40px rgba(0,0,0,0.85);
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    .brand-title {
      font-size: 20px;
      letter-spacing: 0.32em;
      text-transform: uppercase;
      font-weight: 600;
    }

    .brand-subtitle {
      margin-top: 4px;
      font-size: 11px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--korual-text-soft);
    }

    .nav {
      margin-top: 16px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .nav-link {
      width: 100%;
      text-align: left;
      border-radius: 999px;
      border: 1px solid transparent;
      background: transparent;
      color: var(--korual-text-soft);
      font-size: 13px;
      padding: 9px 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: background 0.12s ease-out, border-color 0.12s ease-out, color 0.12s ease-out, transform 0.1s ease-out;
    }

    .nav-link:hover {
      background: rgba(12,12,20,0.9);
      border-color: rgba(255,255,255,0.12);
      color: #ffffff;
      transform: translateY(-1px);
    }

    .nav-link.active {
      background: linear-gradient(135deg, rgba(214,169,84,0.2), rgba(0,0,0,0.7));
      border-color: rgba(214,169,84,0.9);
      color: #fff5dd;
      box-shadow: 0 12px 20px rgba(0,0,0,0.9);
    }

    .sidebar-footer {
      margin-top: auto;
      padding-top: 16px;
      border-top: 1px solid rgba(255,255,255,0.15);
      font-size: 11px;
      color: var(--korual-text-soft);
    }

    .api-status {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-bottom: 4px;
    }

    .status-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: radial-gradient(circle, #65ffb9 0, #0fae5f 55%, #04502e 100%);
      box-shadow: 0 0 14px rgba(37,213,125,0.9);
    }

    .api-meta {
      opacity: 0.8;
    }

    .sidebar-backdrop {
      /* ê¸°ì¡´ mobileìš© êµ¬ì¡° ìœ ì§€í•˜ë˜, í•˜ì´ì—”ë“œí†¤ */
      background: rgba(0,0,0,0.45);
      backdrop-filter: blur(10px);
    }

    /* ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ */
    .content {
      border-radius: 24px;
      background: rgba(4,4,10,0.94);
      border: 1px solid rgba(255,255,255,0.08);
      padding: 16px 18px 14px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      overflow: hidden;
      position: relative;
    }

    /* ìƒë‹¨ë°” */
    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: 10px 10px 10px;
      border-radius: 18px;
      background:
        linear-gradient(135deg, rgba(255,255,255,0.03), transparent 50%),
        radial-gradient(circle at 0 0, rgba(214,169,84,0.22), transparent 60%),
        rgba(6,6,14,0.95);
      border: 1px solid rgba(255,255,255,0.16);
      box-shadow: 0 16px 40px rgba(0,0,0,0.85);
    }

    .topbar-left {
      display: flex;
      align-items: center;
      gap: 12px;
      min-width: 0;
    }

    .mobile-menu-btn {
      width: 34px;
      height: 34px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(7,7,14,0.95);
      display: none;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      gap: 4px;
      cursor: pointer;
    }

    .mobile-menu-btn span {
      width: 16px;
      height: 2px;
      border-radius: 999px;
      background: #ffffff;
    }

    @media (max-width: 960px) {
      .mobile-menu-btn {
        display: inline-flex;
      }
    }

    .topbar-title {
      font-size: 13px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      font-weight: 500;
    }

    .topbar-meta {
      margin-top: 2px;
      font-size: 11px;
      color: var(--korual-text-soft);
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      align-items: center;
    }

    .last-sync {
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.1);
      background: rgba(4,4,10,0.88);
      font-size: 10px;
    }

    .topbar-right {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    /* ë²„íŠ¼ ê³„ì—´ */
    .primary-btn,
    .ghost-btn {
      border-radius: 999px;
      font-size: 11px;
      padding: 7px 14px;
      border: 1px solid transparent;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
      transition: background 0.12s ease-out, border-color 0.12s ease-out, color 0.12s ease-out, transform 0.1s ease-out, box-shadow 0.1s ease-out;
    }

    .primary-btn {
      background: radial-gradient(circle at 0 0,#ffe7b4 0,#d6a954 42%,#8f642c 100%);
      color: #111;
      box-shadow: 0 10px 25px rgba(0,0,0,0.9);
      font-weight: 500;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .primary-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 34px rgba(0,0,0,0.98);
      filter: brightness(1.03);
    }

    .ghost-btn {
      background: rgba(12,12,18,0.98);
      border-color: rgba(255,255,255,0.16);
      color: var(--korual-text-soft);
    }

    .ghost-btn:hover {
      transform: translateY(-1px);
      background: rgba(20,20,26,0.98);
      color: #ffffff;
    }

    .ghost-btn.small {
      padding: 5px 10px;
      font-size: 10px;
    }

    .logout-btn {
      color: #ffb4c0;
      border-color: rgba(255,76,91,0.3);
      background: radial-gradient(circle at 0 0, rgba(255,76,91,0.18), rgba(5,5,10,0.95));
    }

    .logout-btn:hover {
      background: radial-gradient(circle at 0 0, rgba(255,76,91,0.3), rgba(5,5,10,0.98));
    }

    /* í…Œë§ˆ í† ê¸€ */
    .theme-toggle {
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(5,5,10,0.98);
      padding: 4px 8px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      font-size: 10px;
      color: var(--korual-text-soft);
    }

    .theme-toggle-track {
      width: 34px;
      height: 16px;
      border-radius: 999px;
      background: rgba(255,255,255,0.08);
      display: flex;
      align-items: center;
      padding: 0 2px;
    }

    .theme-toggle-thumb {
      width: 12px;
      height: 12px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #ffffff 0, #ffe7b4 45%, #d6a954 80%);
      transform: translateX(0);
      transition: transform 0.18s ease-out;
    }

    body[data-theme="dark"] .theme-toggle-thumb {
      transform: translateX(16px);
    }

    .theme-toggle-label {
      letter-spacing: 0.14em;
      text-transform: uppercase;
    }

    /* ì„¹ì…˜ ê³µí†µ */
    .section {
      display: none;
      flex-direction: column;
      gap: 14px;
      margin-top: 6px;
    }

    .section.active {
      display: flex;
    }

    .section-header-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      gap: 12px;
      flex-wrap: wrap;
      padding: 8px 2px;
    }

    .section-header-row h2 {
      margin: 0;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .section-desc {
      margin: 4px 0 0;
      font-size: 11px;
      color: var(--korual-text-soft);
    }

    .section-actions {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .input {
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(8,8,14,0.96);
      padding: 7px 12px;
      font-size: 11px;
      color: var(--korual-text);
      outline: none;
      min-width: 180px;
    }

    .input::placeholder {
      color: rgba(169,172,184,0.8);
    }

    .input:focus {
      border-color: rgba(214,169,84,0.8);
      box-shadow: 0 0 0 1px rgba(214,169,84,0.3);
    }

    /* ì¹´ë“œ / íŒ¨ë„ */
    .cards-grid {
      display: grid;
      grid-template-columns: repeat(4, minmax(0,1fr));
      gap: 10px;
    }

    @media (max-width: 1100px) {
      .cards-grid {
        grid-template-columns: repeat(2, minmax(0,1fr));
      }
    }
    @media (max-width: 640px) {
      .cards-grid {
        grid-template-columns: minmax(0,1fr);
      }
    }

    .card {
      border-radius: var(--korual-radius-lg);
      border: 1px solid var(--korual-border-soft);
      background: linear-gradient(135deg, rgba(255,255,255,0.04), transparent 45%), rgba(8,8,15,0.98);
      box-shadow: 0 16px 30px rgba(0,0,0,0.8);
      padding: 12px 14px;
    }

    .card-label {
      font-size: 11px;
      color: var(--korual-text-soft);
      margin-bottom: 6px;
    }

    .card-value {
      font-size: 20px;
      font-weight: 600;
      letter-spacing: 0.04em;
    }

    .panel {
      border-radius: var(--korual-radius-lg);
      border: 1px solid var(--korual-border-soft);
      background: rgba(10,10,16,0.98);
      box-shadow: 0 18px 40px rgba(0,0,0,0.9);
    }

    .panel-header {
      padding: 12px 16px 8px;
      border-bottom: 1px solid rgba(255,255,255,0.08);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .panel-header h3 {
      margin: 0;
      font-size: 14px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
    }

    .panel-body {
      padding: 12px 16px 14px;
    }

    /* ì˜¤ëŠ˜ ìš”ì•½ */
    .today-metrics {
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
    }

    .today-metric {
      flex: 1 1 140px;
      border-radius: var(--korual-radius-md);
      border: 1px solid rgba(255,255,255,0.12);
      background: linear-gradient(135deg, rgba(214,169,84,0.12), rgba(6,6,10,0.96));
      padding: 9px 12px;
    }

    .today-label {
      display: block;
      font-size: 11px;
      color: var(--korual-text-soft);
      margin-bottom: 4px;
    }

    .today-value {
      font-size: 17px;
      font-weight: 600;
    }

    /* í…Œì´ë¸” ì˜ì—­ */
    .table-wrapper {
      border-radius: var(--korual-radius-lg);
      border: 1px solid rgba(255,255,255,0.1);
      overflow: hidden;
      background: rgba(8,8,15,0.98);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 11px;
    }

    thead {
      background: linear-gradient(135deg, rgba(255,255,255,0.04), transparent 40%), rgba(10,10,18,0.98);
    }

    th, td {
      padding: 8px 10px;
      border-bottom: 1px solid rgba(255,255,255,0.06);
    }

    th {
      text-align: left;
      font-weight: 500;
      color: var(--korual-text-soft);
      font-size: 10px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }

    tbody tr:nth-child(even) {
      background: rgba(6,6,12,0.9);
    }

    tbody tr:hover {
      background: rgba(18,18,28,0.98);
    }

    .empty-state {
      text-align: center;
      color: var(--korual-text-soft);
      padding: 14px 10px;
    }

    /* í‘¸í„° */
    .footer {
      margin-top: auto;
      padding-top: 10px;
    }

    .footer-inner {
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(6,6,12,0.95);
      padding: 8px 12px;
      font-size: 10px;
      color: var(--korual-text-soft);
      text-align: center;
    }

    /* ëª¨ë‹¬ í•˜ì´ì—”ë“œ ìŠ¤íƒ€ì¼ (ê¸°ì¡´ modal.css ìœ„ì— ì˜¤ë²„ë¼ì´ë“œ) */
    .modal-layer {
      backdrop-filter: blur(16px);
    }

    .modal-panel {
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,0.18);
      background:
        linear-gradient(135deg, rgba(255,255,255,0.06), transparent 45%),
        rgba(7,7,14,0.98);
      box-shadow: 0 24px 60px rgba(0,0,0,0.9);
    }

    .modal-header {
      padding: 12px 16px 8px;
      border-bottom: 1px solid rgba(255,255,255,0.08);
    }

    .modal-title {
      font-size: 14px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }

    .modal-body {
      padding: 12px 16px 14px;
      font-size: 11px;
    }

    .modal-footer {
      padding: 10px 16px 12px;
      border-top: 1px solid rgba(255,255,255,0.08);
      display: flex;
      justify-content: flex-end;
      gap: 8px;
    }

    .modal-field-row {
      margin-bottom: 8px;
    }

    .modal-label {
      display: block;
      margin-bottom: 3px;
      font-size: 10px;
      color: var(--korual-text-soft);
    }

    .modal-field-row .input {
      width: 100%;
      border-radius: 10px;
      font-size: 11px;
    }

    .modal-open {
      overflow: hidden;
    }

    /* í˜ì´ë“œ ì¸ */
    .content {
      opacity: 0;
      transform: translateY(6px);
      animation: korualFadeIn 0.4s ease-out forwards;
    }

    @keyframes korualFadeIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>

<body>
<div class="app-shell">

  <!-- ======================================
       â–  ì‚¬ì´ë“œë°”
  ======================================= -->
  <aside class="sidebar">
    <div>
      <div class="brand-title">KORUAL</div>
      <div class="brand-subtitle">Control Center</div>
    </div>

    <nav class="nav">
      <button class="nav-link active" data-section="dashboard">ğŸ“Š ëŒ€ì‹œë³´ë“œ</button>
      <button class="nav-link" data-section="products">ğŸ“¦ ìƒí’ˆ ê´€ë¦¬</button>
      <button class="nav-link" data-section="orders">ğŸ“® ì£¼ë¬¸ ê´€ë¦¬</button>
      <button class="nav-link" data-section="members">ğŸ§‘â€ğŸ¤â€ğŸ§‘ íšŒì› ê´€ë¦¬</button>
      <button class="nav-link" data-section="stock">ğŸ¬ ì¬ê³  ê´€ë¦¬</button>
      <button class="nav-link" data-section="logs">ğŸ“ ë¡œê·¸</button>
    </nav>

    <div class="sidebar-footer">
      <div class="api-status">
        <span class="status-dot"></span>
        <span>API ì—°ê²° ìƒíƒœ</span>
      </div>
      <div class="api-meta">
        Ping: <span id="apiPing">- ms</span>
      </div>
    </div>
  </aside>

  <!-- ëª¨ë°”ì¼ì¼ ë•Œ ì‚¬ì´ë“œë°” ë’¤ ì–´ë‘ìš´ ë°°ê²½ -->
  <div id="sidebarBackdrop" class="sidebar-backdrop"></div>

  <!-- ======================================
       â–  ë©”ì¸ ì»¨í…ì¸ 
  ======================================= -->
  <main class="content">

    <!-- ìƒë‹¨ë°” -->
    <header class="topbar">
      <div class="topbar-left">

        <!-- ëª¨ë°”ì¼ -->
        <button id="menuToggle" class="mobile-menu-btn" type="button" aria-label="ë©”ë‰´ ì—´ê¸°">
          <span></span><span></span><span></span>
        </button>

        <div class="topbar-text">
          <div class="topbar-title">KORUAL CONTROL CENTER</div>
          <div class="topbar-meta">
            ë°˜ê°‘ìŠµë‹ˆë‹¤, <span id="welcomeUser">KORUAL</span>ë‹˜
            <span class="last-sync" id="last-sync">ë§ˆì§€ë§‰ ë™ê¸°í™”: -</span>
          </div>
        </div>
      </div>

      <div class="topbar-right">
        <!-- í…Œë§ˆ -->
        <button id="themeToggle" class="theme-toggle" type="button">
          <span class="theme-toggle-label" data-light="Light" data-dark="Dark">Light</span>
          <span class="theme-toggle-track">
            <span class="theme-toggle-thumb"></span>
          </span>
        </button>

        <!-- ìƒˆë¡œê³ ì¹¨ -->
        <button id="btnRefreshAll" class="primary-btn" type="button">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>

        <!-- ë¡œê·¸ì•„ì›ƒ -->
        <button id="btnLogout" class="ghost-btn logout-btn" type="button">ë¡œê·¸ì•„ì›ƒ</button>
      </div>
    </header>

    <!-- ============================================================
         1) ëŒ€ì‹œë³´ë“œ
    ============================================================ -->
    <section id="section-dashboard" class="section active">

      <div class="section-header-row">
        <div>
          <h2>ğŸ“Š ëŒ€ì‹œë³´ë“œ</h2>
          <p class="section-desc">ì „ì²´ ìš´ì˜ ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ìš”ì•½í•©ë‹ˆë‹¤.</p>
        </div>
      </div>

      <!-- ìš”ì•½ ì¹´ë“œ -->
      <div class="cards-grid">
        <div class="card">
          <div class="card-label">ì´ ìƒí’ˆ ìˆ˜</div>
          <div class="card-value" id="cardTotalProducts">-</div>
        </div>
        <div class="card">
          <div class="card-label">ì´ ì£¼ë¬¸ ìˆ˜</div>
          <div class="card-value" id="cardTotalOrders">-</div>
        </div>
        <div class="card">
          <div class="card-label">ì¶”ì • ë§¤ì¶œ í•©ê³„</div>
          <div class="card-value" id="cardTotalRevenue">-</div>
        </div>
        <div class="card">
          <div class="card-label">íšŒì› ìˆ˜</div>
          <div class="card-value" id="cardTotalMembers">-</div>
        </div>
      </div>

      <!-- ì˜¤ëŠ˜ ìš”ì•½ -->
      <div class="panel">
        <div class="panel-header"><h3>ì˜¤ëŠ˜ ìš”ì•½</h3></div>

        <div class="panel-body">
          <div class="today-metrics">

            <div class="today-metric">
              <span class="today-label">ì˜¤ëŠ˜ ì£¼ë¬¸</span>
              <span class="today-value" id="todayOrders">-</span>
            </div>

            <div class="today-metric">
              <span class="today-label">ì˜¤ëŠ˜ ë§¤ì¶œ</span>
              <span class="today-value" id="todayRevenue">-</span>
            </div>

            <div class="today-metric">
              <span class="today-label">ì¤€ë¹„ì¤‘ ì£¼ë¬¸</span>
              <span class="today-value" id="todayPending">-</span>
            </div>

          </div>
        </div>
      </div>

      <!-- ìµœê·¼ ì£¼ë¬¸ -->
      <div class="panel">
        <div class="panel-header">
          <h3>ìµœê·¼ ì£¼ë¬¸</h3>
          <button id="goOrders" class="ghost-btn small" type="button">â†’ ì£¼ë¬¸ ê´€ë¦¬</button>
        </div>

        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>ì£¼ë¬¸ì¼ì</th>
                <th>ì£¼ë¬¸ë²ˆí˜¸</th>
                <th>ìƒí’ˆëª…</th>
                <th>ìˆ˜ëŸ‰</th>
                <th>ê¸ˆì•¡</th>
                <th>ì±„ë„</th>
                <th>ìƒíƒœ</th>
              </tr>
            </thead>
            <tbody id="recentOrdersBody">
              <tr><td colspan="7" class="empty-state">ë¡œë”©ì¤‘â€¦</td></tr>
            </tbody>
          </table>
        </div>
      </div>

    </section>


    <!-- ============================================================
         2) ìƒí’ˆ ê´€ë¦¬
    ============================================================ -->
    <section id="section-products" class="section">

      <div class="section-header-row">
        <div>
          <h2>ğŸ“¦ ìƒí’ˆ ê´€ë¦¬</h2>
          <p class="section-desc">ìƒí’ˆ ì •ë³´ ë° íŒë§¤ê°€/ì¬ê³ ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</p>
        </div>

        <div class="section-actions">
          <input id="searchProducts" class="input" placeholder="ê²€ìƒ‰ (ìƒí’ˆëª… / ì½”ë“œ / ì˜µì…˜)" />
        </div>
      </div>

      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>ìƒí’ˆì½”ë“œ</th>
              <th>ìƒí’ˆëª…</th>
              <th>ì˜µì…˜</th>
              <th>íŒë§¤ê°€</th>
              <th>ì¬ê³ </th>
            </tr>
          </thead>

          <tbody id="productsBody" data-entity="products" data-sheet="PRODUCTS">
            <tr><td colspan="5" class="empty-state">ë°ì´í„° ì—†ìŒ</td></tr>
          </tbody>
        </table>
      </div>

    </section>


    <!-- ============================================================
         3) ì£¼ë¬¸ ê´€ë¦¬
    ============================================================ -->
    <section id="section-orders" class="section">

      <div class="section-header-row">
        <div>
          <h2>ğŸ“® ì£¼ë¬¸ ê´€ë¦¬</h2>
          <p class="section-desc">ì „ì²´ ì£¼ë¬¸ ëª©ë¡ ë° ë°°ì†¡ ìƒíƒœ ê´€ë¦¬</p>
        </div>

        <div class="section-actions">
          <input id="searchOrders" class="input" placeholder="ê²€ìƒ‰ (ì£¼ë¬¸ë²ˆí˜¸ / ê³ ê°ëª… / ìƒíƒœ)" />
        </div>
      </div>

      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>íšŒì›ë²ˆí˜¸</th>
              <th>ë‚ ì§œ</th>
              <th>ì£¼ë¬¸ë²ˆí˜¸</th>
              <th>ê³ ê°ëª…</th>
              <th>ìƒí’ˆëª…</th>
              <th>ìˆ˜ëŸ‰</th>
              <th>ê¸ˆì•¡</th>
              <th>ìƒíƒœ</th>
            </tr>
          </thead>

          <tbody id="ordersBody" data-entity="orders" data-sheet="ORDERS">
            <tr><td colspan="8" class="empty-state">ë°ì´í„° ì—†ìŒ</td></tr>
          </tbody>
        </table>
      </div>

    </section>

    <!-- ============================================================
         4) íšŒì› ê´€ë¦¬
    ============================================================ -->
    <section id="section-members" class="section">

      <div class="section-header-row">
        <div>
          <h2>ğŸ§ íšŒì› ê´€ë¦¬</h2>
          <p class="section-desc">íšŒì› ì •ë³´, ë“±ê¸‰, ëˆ„ì ë§¤ì¶œ, ìµœê·¼ ì£¼ë¬¸ì¼ì„ í™•ì¸í•©ë‹ˆë‹¤.</p>
        </div>

        <div class="section-actions" style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
          <input id="searchMembers" class="input" placeholder="ê²€ìƒ‰ (íšŒì›ë²ˆí˜¸ / ì´ë¦„ / ì´ë©”ì¼ / ì „í™”ë²ˆí˜¸ / ë“±ê¸‰)" />
        </div>
      </div>

      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>íšŒì›ë²ˆí˜¸</th>
              <th>ì´ë¦„</th>
              <th>ì „í™”ë²ˆí˜¸</th>
              <th>ì´ë©”ì¼</th>
              <th>ê°€ì…ì¼</th>
              <th>ì±„ë„</th>
              <th>ë“±ê¸‰</th>
              <th>ëˆ„ì ë§¤ì¶œ</th>
              <th>í¬ì¸íŠ¸</th>
              <th>ìµœê·¼ì£¼ë¬¸ì¼</th>
              <th>ë©”ëª¨</th>
            </tr>
          </thead>

          <tbody id="membersBody" data-entity="members" data-sheet="MEMBERS">
            <tr><td colspan="11" class="empty-state">ë°ì´í„° ì—†ìŒ</td></tr>
          </tbody>
        </table>
      </div>

    </section>


    <!-- ============================================================
         5) ì¬ê³  ê´€ë¦¬
    ============================================================ -->
    <section id="section-stock" class="section">

      <div class="section-header-row">
        <div>
          <h2>ğŸ·ï¸ ì¬ê³  ê´€ë¦¬</h2>
          <p class="section-desc">ì…ê³ /ì¶œê³  ì—†ì´ë„ ìë™ ì¹´ìš´íŒ…ëœ ì¬ê³ ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</p>
        </div>

        <div class="section-actions">
          <input id="searchStock" class="input" placeholder="ê²€ìƒ‰ (ìƒí’ˆì½”ë“œ / ìƒí’ˆëª… / ìƒíƒœ / ì°½ê³ )" />
        </div>
      </div>

      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>ìƒí’ˆì½”ë“œ</th>
              <th>ìƒí’ˆëª…</th>
              <th>í˜„ì¬ ì¬ê³ </th>
              <th>ì•ˆì „ ì¬ê³ </th>
              <th>ìƒíƒœ</th>
              <th>ì°½ê³ </th>
              <th>ì±„ë„</th>
            </tr>
          </thead>

          <tbody id="stockBody" data-entity="stock" data-sheet="STOCK">
            <tr><td colspan="7" class="empty-state">ë°ì´í„° ì—†ìŒ</td></tr>
          </tbody>
        </table>
      </div>

    </section>


    <!-- ============================================================
         6) ë¡œê·¸ ëª¨ë‹ˆí„°ë§
    ============================================================ -->
    <section id="section-logs" class="section">

      <div class="section-header-row">
        <div>
          <h2>ğŸ“˜ ë¡œê·¸ ëª¨ë‹ˆí„°ë§</h2>
          <p class="section-desc">ìë™í™” ê¸°ë¡, ì•Œë¦¼ ë¡œê·¸, API í˜¸ì¶œ ë¡œê·¸ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</p>
        </div>

        <div class="section-actions">
          <input id="searchLogs" class="input" placeholder="ê²€ìƒ‰ (ì‹œê°„ / íƒ€ì… / ë©”ì‹œì§€)" />
        </div>
      </div>

      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>ì‹œê°„</th>
              <th>íƒ€ì…</th>
              <th>ë©”ì‹œì§€</th>
            </tr>
          </thead>

          <tbody id="logsBody" data-entity="logs" data-sheet="LOGS">
            <tr><td colspan="3" class="empty-state">ë°ì´í„° ì—†ìŒ</td></tr>
          </tbody>
        </table>
      </div>

    </section>

    <!-- ============================================================
          FOOTER
    ============================================================ -->
    <footer class="footer">
      <div class="footer-inner">
        <span>Â© 2025 KORUAL Control Center Â· All Systems Automated</span>
      </div>
    </footer>

  </main> <!-- /content -->
</div> <!-- /app-shell -->

<!-- ============================================================
     â–  ìˆ˜ì •/ì‚­ì œ ê³µí†µ ëª¨ë‹¬ ë ˆì´ì–´
============================================================ -->
<div
  id="korualModalLayer"
  class="modal-layer"
  data-modal-layer
  style="display:none;"
>
  <div id="korualModalBackdrop" class="modal-backdrop"></div>

  <!-- ìˆ˜ì • ëª¨ë‹¬ -->
  <div id="rowEditModal" class="modal-panel" data-type="edit">
    <div class="modal-header">
      <h3 class="modal-title">
        <span>í–‰ ìˆ˜ì •</span>
      </h3>
      <button type="button" class="modal-close-btn" data-close-modal>âœ•</button>
    </div>

    <div class="modal-body">
      <div class="modal-meta">
        <span id="rowEditEntityLabel">-</span>
        <span id="rowEditRowLabel" class="row-label">ROW: -</span>
      </div>

      <div id="rowEditFields" class="modal-fields"></div>
    </div>

    <div class="modal-footer">
      <button type="button" id="rowEditSave" class="primary-btn">ì €ì¥</button>
      <button type="button" class="ghost-btn" data-close-modal>ì·¨ì†Œ</button>
    </div>
  </div>

  <!-- ì‚­ì œ ëª¨ë‹¬ -->
  <div
    id="rowDeleteModal"
    class="modal-panel"
    data-type="delete"
    data-modal-delete
    style="display:none;"
  >
    <div class="modal-header">
      <h3 class="modal-title">í–‰ ì‚­ì œ</h3>
      <button type="button" class="modal-close-btn" data-close-modal>âœ•</button>
    </div>

    <div class="modal-body">
      <p id="rowDeleteMessage">
        ì„ íƒí•œ í–‰ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?
      </p>
      <div class="modal-meta">
        <span id="rowDeleteEntityLabel">-</span>
        <span id="rowDeleteRowLabel" class="row-label">ROW: -</span>
      </div>
    </div>

    <div class="modal-footer">
      <button type="button" id="rowDeleteConfirm" class="primary-btn">ì‚­ì œ</button>
      <button type="button" class="ghost-btn" data-close-modal>ì·¨ì†Œ</button>
    </div>
  </div>
</div>

<!-- JS ì—°ê²° -->
<script src="app.js"></script>
<script src="modal.js"></script>

<!-- ëª¨ë‹¬ ì „ì—­ í—¬í¼ (modal.jsì—ì„œ ì¨ë„ ë¨ â€“ ì¤‘ë³µë˜ë©´ ì œê±°í•´ë„ ok) -->
<script>
  (function () {
    const layer      = document.getElementById("korualModalLayer");
    const backdrop   = document.getElementById("korualModalBackdrop");
    const editModal  = document.getElementById("rowEditModal");
    const deleteModal= document.getElementById("rowDeleteModal");

    function closeAll() {
      if (!layer) return;
      layer.style.display = "none";
      if (editModal)  editModal.style.display = "none";
      if (deleteModal) deleteModal.style.display = "none";
      document.body.classList.remove("modal-open");
    }

    document.querySelectorAll("[data-close-modal]").forEach(btn => {
      btn.addEventListener("click", closeAll);
    });
    if (backdrop) {
      backdrop.addEventListener("click", closeAll);
    }

    window.KORUAL_MODAL = {
      closeAll,

      openEdit(payload) {
        if (!layer || !editModal) return;

        layer.style.display = "flex";
        document.body.classList.add("modal-open");
        editModal.style.display = "block";
        if (deleteModal) deleteModal.style.display = "none";

        const entityLabelMap = {
          members: "íšŒì›",
          orders: "ì£¼ë¬¸",
          products: "ìƒí’ˆ",
          stock: "ì¬ê³ ",
          logs: "ë¡œê·¸"
        };
        const entityName = entityLabelMap[payload.entity] || payload.entity || "-";
        document.getElementById("rowEditEntityLabel").textContent = `[${entityName}]`;
        document.getElementById("rowEditRowLabel").textContent    = `ROW: ${payload.rowIndex}`;

        const wrap = document.getElementById("rowEditFields");
        if (!wrap) return;
        wrap.innerHTML = "";

        const data = payload.data || {};
        Object.keys(data).forEach((key) => {
          const field = document.createElement("div");
          field.className = "modal-field-row";

          const label = document.createElement("label");
          label.className = "modal-label";
          label.textContent = key;

          const input = document.createElement("input");
          input.className = "input";
          input.value = data[key] ?? "";
          input.dataset.fieldKey = key;

          field.appendChild(label);
          field.appendChild(input);
          wrap.appendChild(field);
        });

        const saveBtn = document.getElementById("rowEditSave");
        if (saveBtn) {
          saveBtn.dataset.entity   = payload.entity || "";
          saveBtn.dataset.sheet    = payload.sheet  || "";
          saveBtn.dataset.rowIndex = String(payload.rowIndex || "");
        }
      },

      openDelete(payload) {
        if (!layer || !deleteModal) return;

        layer.style.display = "flex";
        document.body.classList.add("modal-open");
        deleteModal.style.display = "block";
        if (editModal) editModal.style.display = "none";

        const entityLabelMap = {
          members: "íšŒì›",
          orders: "ì£¼ë¬¸",
          products: "ìƒí’ˆ",
          stock: "ì¬ê³ ",
          logs: "ë¡œê·¸"
        };
        const entityName = entityLabelMap[payload.entity] || payload.entity || "-";
        document.getElementById("rowDeleteEntityLabel").textContent = `[${entityName}]`;
        document.getElementById("rowDeleteRowLabel").textContent    = `ROW: ${payload.rowIndex}`;

        const msg = payload.title
          ? `ë‹¤ìŒ ë°ì´í„°ë¥¼ ì‚­ì œí• ê¹Œìš”?\n${payload.title}`
          : "ì„ íƒí•œ í–‰ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?";
        document.getElementById("rowDeleteMessage").textContent = msg;

        const delBtn = document.getElementById("rowDeleteConfirm");
        if (delBtn) {
          delBtn.dataset.entity   = payload.entity || "";
          delBtn.dataset.sheet    = payload.sheet  || "";
          delBtn.dataset.rowIndex = String(payload.rowIndex || "";
        }
      }
    };
  })();
</script>

</body>
</html>
